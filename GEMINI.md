# GEMINI: 실시간 친구 그림 게임 프로젝트

## 1. 프로젝트 개요

- **프로젝트명:** CatchMind Online (가칭)
- **장르:** 실시간 멀티플레이 그림 맞추기 게임
- **플랫폼:** 웹
- **주요 기능:**
  - 친구들과 같은 방(Room)에 입장
  - 마우스로 그림을 그리고 실시간 공유
  - 각 유저의 그림 데이터를 서버에서 관리
  - 방 단위 실시간 동기화 (Socket.IO 기반)

---

## 2. 아키텍처

- **프론트엔드**
  - **라이브러리/도구:** tldraw (커스터마이징 예정)
  - Canvas 기반 실시간 드로잉
  - Socket.IO 클라이언트로 서버와 통신
- **백엔드**
  - **프레임워크:** NestJS
  - **실시간 통신:** Socket.IO Gateway
  - **데이터 관리:**
    - 로컬 서버 메모리 기반 (초기 테스트)
    - 확장 시 Redis Pub/Sub 연동 가능
  - **서비스 구조:** GameService에서 방과 그림 데이터 관리

---

## 3. 기술 스택

| 구분     | 기술/라이브러리 | 용도                           |
| -------- | --------------- | ------------------------------ |
| Backend  | NestJS          | 서버 프레임워크                |
| Backend  | Socket.IO       | 실시간 통신                    |
| Backend  | Redis (선택)    | 수평 확장, 메시지 브로드캐스트 |
| Frontend | tldraw          | 그림 그리기 UI 및 캔버스       |
| Frontend | HTML / JS       | 테스트 클라이언트 및 초기 UI   |
| 기타     | TypeScript      | 전체 코드 타입 안정성          |

---

## 4. 개발 전략

1. **단계별 개발**
   - 초기: 단일 서버, 로컬 메모리 기반 동기화
   - 테스트: `test-client.html`로 브라우저 2개 탭에서 그림 이벤트 실시간 확인
   - 확장: Redis 도입, 서버 클러스터링, 배포 환경 준비
2. **실시간 통신**
   - 클라이언트 이벤트: `drawing`
   - 서버 브로드캐스트: `drawing:remote` (보낸 사람 제외)
   - 방 단위 관리: Socket.IO Room 기능 활용
3. **tldraw 커스터마이징**
   - 기본 Canvas 기능에 맞춰 실시간 이벤트 매핑
   - 필요 시 DrawDto 등 DTO로 데이터 검증 후 서버 전송
4. **테스트 및 디버깅**
   - 서버 로그: 연결/연결해제, 이벤트 수신 로그
   - 클라이언트 콘솔: emit 확인 및 다른 클라이언트 수신 확인

---

## 5. 배포 계획

1. 로컬에서 단일 서버 테스트 완료
2. 클라우드 서버에 NestJS + Socket.IO 배포
3. 필요 시 Redis 추가 및 수평 확장
4. tldraw 프론트엔드 정식 통합 후 UI/UX 개선

---

## 6. 향후 고려사항

- 방 최대 인원 제한 및 관리
- 유저 인증/닉네임 관리
- 그림 기록 저장 및 재생 기능
- 게임 점수/정답 매칭 로직 추가
- 모바일 대응 및 반응형 UI
